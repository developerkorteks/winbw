!function(a){var b=(function(){var d=0;return function(e,f){clearTimeout(d);d=setTimeout(e,f)}})();var c=false;enterActive=true;a('input[name="s"]').on("input",function(){var d=this.value;b(function(){if(d.length<=2){a(ajaxSearch.area).hide();a(ajaxSearch.button).find("span").removeClass("fa-spinner").removeClass("loading");return}if(!c){c=true;if(ajaxSearch.livesearchactive==true){a(ajaxSearch.button).find("span").addClass("fa-spinner").addClass("loading");a(ajaxSearch.area).find("ul").addClass("process").addClass("noselect");a.ajax({type:"GET",url:ajaxSearch.api,data:"keyword="+d+"&nonce="+ajaxSearch.nonce,dataType:"json",success:function(i){if(i.error){a(ajaxSearch.area).show();e=ajaxSearch.more,g='<li class="ctsx"><a href="'+ajaxSearch.url+"/?s="+d+' " class="more live_search_click" data-search="searchform">'+e+"</a></li>";a(ajaxSearch.area).html("<ul><li><center><b>"+i.title+"</b></center></li>"+g+"</ul>")}else{a(ajaxSearch.area).show();var h="<b>"+d+"</b>",e=ajaxSearch.more,g='<li class="ctsx"><a href="'+ajaxSearch.url+"/?s="+d+' " class="more live_search_click" data-search="searchform">'+e+"</a></li>";var f=[];a.each(i,function(j,k){name="";genre="";score="";years="";country="";if(k.data.genre!==false){genre='<div class="genre">'+k.data.genre+"</div>"}if(k.data.years!==false){years='<i></i><span class="type '+k.data.years+' ">'+k.data.years+"</span>"}if(k.data.country!==false){country='<i></i><span class="type '+k.data.country+' ">'+k.data.country+"</span>"}if(k.data.score!==false){score='<div class="score"><span class="fa fa-star"></span> '+k.data.score+"</div>"}f.push('<li id="'+j+'"><a href="'+k.url+'" class="clearfix"><div class="poster"><img src="'+k.img+'" /></div><div class="info"><div class="title">'+k.title+"</div>"+score+years+country+genre+"</div></a></li>")});a(ajaxSearch.area).html("<ul>"+f.join("")+g+"</ul>")}},complete:function(){c=false;enterActive=false;a(ajaxSearch.button).find("span").removeClass("fa-spinner").removeClass("loading");a(ajaxSearch.area).find("ul").removeClass("process").removeClass("noselect")}})}}},500)});a(document).on("keypress","#search-form",function(d){if(enterActive){return d.keyCode!=13}});a(document).click(function(){var d=a(event.target);if(a(event.target).closest('input[name="s"]').length==0){a(ajaxSearch.area).hide()}else{a(ajaxSearch.area).show()}})}(jQuery);
